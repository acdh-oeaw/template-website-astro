---
import { createAnalyticsScript } from "@/lib/analytics";

interface Props {
	baseUrl: string;
	id: number;
}

const { baseUrl, id } = Astro.props;
---

<script
	is:inline
	set:html={`(${String(createAnalyticsScript)})("${baseUrl.endsWith("/") ? baseUrl : baseUrl + "/"}", "${String(id)}");`}
/>

<script>
	import type { Locale } from "@/config/i18n.config";
	import { initAnalytics } from "@/lib/analytics";

	const currentLocale = document.documentElement.getAttribute("lang") as Locale;

	initAnalytics(currentLocale);
</script>
